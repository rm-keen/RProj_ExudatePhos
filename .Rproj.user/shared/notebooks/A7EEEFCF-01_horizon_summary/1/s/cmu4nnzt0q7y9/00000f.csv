"0","ratio_calc = subset(AllData, select = c('Location', 'SiteID','ProfileID','MidDepth','Horizon', 'DomVeg', "
"0","                                        'Extractant', 'P_Efficiency', 'NatBiome', 'CoverType', 'Position', "
"0","                                        'Lithology', 'SoilFormation', 'MAP', 'RootMass_mg_gsoil', 'pH', "
"0","                                        'Soil_PercC', 'Soil_MgCg'))"
"0",""
"0","# Set Extractant as a factor"
"0","ratio_calc$Extractant = as.factor(ratio_calc$Extractant)"
"0","levels(ratio_calc$Extractant) = c(""AP"", ""MA"", ""OA"") # AP = APase, MA = Malic Acid, OA = Oxalic Acid"
"0",""
"0","# Put P_Efficiency data in wide format to calculate ratios"
"0","ratio_calc <- ratio_calc %>%"
"0","  pivot_wider(names_from = Extractant,"
"0","              values_from = P_Efficiency,"
"0","              names_prefix = ""Efficiency_"")"
"0",""
"0","# Rename the columns for clarity"
"0","ratio_calc <- ratio_calc %>%"
"0","  rename(MA_Efficiency = ""Efficiency_MA"","
"0","         OA_Efficiency = ""Efficiency_OA"","
"0","         AP_Efficiency = ""Efficiency_AP"")"
"0",""
"0","# Calculate efficiency ratios for each pair of exudates"
"0","ratio_calc$MA_OA = ratio_calc$MA_Efficiency / ratio_calc$OA_Efficiency"
"0","ratio_calc$AP_OA = ratio_calc$AP_Efficiency / ratio_calc$OA_Efficiency"
"0","ratio_calc$AP_MA = ratio_calc$AP_Efficiency / ratio_calc$MA_Efficiency"
"0",""
"0","ratio_calc <- ratio_calc %>%"
"0","  ungroup() %>%"
"0","  mutate(across(everything(), ~ ifelse(is.nan(.), NA, .)))"
