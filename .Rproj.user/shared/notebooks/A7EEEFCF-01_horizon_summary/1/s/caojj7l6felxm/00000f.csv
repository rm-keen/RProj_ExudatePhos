"0","horizon_sub = ratio_calc %>%"
"0","  group_by(Location, SiteID, ProfileID, Horizon, DomVeg, NatBiome, "
"0","           CoverType, Position, Lithology, SoilFormation, MAP) %>%"
"0","  summarise(RootBio = mean(RootMass_mg_gsoil, na.rm = T),   "
"0","            Soil_MgCg = mean(Soil_MgCg, na.rm = T),      "
"0","            pH = mean(pH, na.rm = T), "
"0","            AP_Efficiency = mean(AP_Efficiency, na.rm = T), "
"0","            MA_Efficiency = mean(MA_Efficiency, na.rm = T), "
"0","            OA_Efficiency = mean(OA_Efficiency, na.rm = T),"
"0","            MA_OA = mean(MA_OA, na.rm = T), "
"0","            AP_OA = mean(AP_OA, na.rm = T), "
"0","            AP_MA = mean(AP_MA, na.rm = T),"
"0","            PercC = mean(Soil_PercC, na.rm = T))      "
"0",""
"0","horizon_sub <- horizon_sub %>%"
"0","  ungroup() %>%"
"0","  mutate(across(everything(), ~ ifelse(is.nan(.), NA, .)))"
"0",""
"0","## Selecting O, A, B, and C horizons"
"0","horizon_sub = subset(horizon_sub, Horizon %in% c(""O"", ""A"", ""B"", ""C""))"
"0","horizon_sub$Horizon = factor(horizon_sub$Horizon, levels = c(""O"", ""A"", ""B"", ""C""))"
"0",""
"0","## Remove infinite values caused by zero values in denominator of ratio calculations"
"0","horizon_sub[c('MA_OA')][sapply(horizon_sub[c('MA_OA')], is.infinite)] <- NA"
"0","horizon_sub[c('AP_OA')][sapply(horizon_sub[c('AP_OA')], is.infinite)] <- NA"
