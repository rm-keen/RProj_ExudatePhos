# Exudate–Phosphorus Analysis (`RProj_ExudatePhos`)

**Authors:** Keen RM,  Sullivan PL, Ajami H, Hirmas D, Li L, Flores AN, Jarecke K, Loecke T, Klamm L, Unruh M, Varikuti V, Billings SA  
**Corresponding author:** Rachel Keen (rleasey@gmail.com)  
**Affiliation:** Oregon State University, College of Earth, Ocean, and Atmospheric Sciences  
**Manuscript status:** IN REVIEW  
**Associated publication:** PENDING  


---


### Overview

This repository contains all code and intermediate data objects used for the exudate–phosphorus analysis (`RProj_ExudatePhos`) associated with the manuscript "Quantifying potential nutrient liberation following plant investment in root exudates: variation across soil profiles and ecosystems in the United States".   

It includes:  
- Preparation of the full dataset used in the manuscript  
- Profile- and horizon-level summaries  
- Code to generate main text figures, supplementary figures, and statistical results  

All analyses are written in **R Markdown** and the computational environment is managed with `renv`, so the full workflow can be reproduced on another machine.  


---


### Repository Structure
```text
RProj_ExudatePhos/
├── data_inputs/             # Input data files (read-only .csv files)
├── data_intermediate/       # Processed R objects used by figure scripts (.rds files, produced in script 01)
├── renv/                    # Local package library (managed by renv)
├── scripts/                 # R Markdown files for data prep, analyses, and figures
├── renv.lock                # Frozen package versions for reproducibility
├── .gitignore
├── .gitattributes
├── .Rprofile                # Activates renv on project load
└── RProj_ExudatePhos.Rproj
```

---

### Data Description  

**Data inputs** `data_inputs/`  
`ExudateProj_Full.csv`  
- Full observational dataset for the exudate–phosphorus project.  

`Root_SOC_Profiles.csv`  
- Root and soil organic carbon profiles used for model summaries.  

PRISM_files folder  
- `PRISM_ppt_30yr_normal_4kmM4_annual_bil.bil`  
- `PRISM_ppt_30yr_normal_4kmM4_annual_bil.hdr`  
- `PRISM_tmean_30yr_normal_4kmM5_annual_bil.bil`  
- `PRISM_tmean_30yr_normal_4kmM5_annual_bil.hdr`  
_Thirty-year normal precipitation and mean annual temperature rasters used to derive site-level climate variables._

**Note:** Files in data_inputs/ are treated as read-only. All derived data are written to data\_intermediate/.  


---


**Intermediate data** `data_intermediate/`  
Generated by `scripts/01_DataPrep.Rmd`:  
- `AllData.rds` - Full combined dataset used in all subsequent analyses.  
- `horizon_sub.rds` - Horizon-averaged dataset used for horizon-level analyses and figures.  

**Note:** These files are fully reproducible from `data_inputs/`.  


---


**Scripts and Analysis Workflow** `scripts/` 
Scripts are numbered in execution order:  

`01_DataPrep.Rmd`  
- Reads all files from data\_inputs/  
- Cleans and merges datasets  
- Writes AllData.rds and horizon\_sub.rds  

`02_Profile_Figures.Rmd`  
- Generates profile-level exploratory and summary figures  

`03_Figure1.Rmd`  
`04_Figure2.Rmd`  
`05_Figure3.Rmd`  
`06_Figure4.Rmd`  
`07_Figure5.Rmd`  
- Each script generates one main manuscript figure (Figures 1–5) and includes associated models and statistical results  

`08_SuppFigures_1.Rmd`  
`09_SuppFigures_2.Rmd`  
- Generate supplementary figures and tables  

**Note:** Each figure script...  
- Reads from `data_intermediate/`
- Loads all required libraries  
- Produces final figures and/or knitted output  


---


### Software and Reproducibility  
**R version:**  ADD R VERSION  
**Environment manager:** `renv`  
**Primary platform tested:** Windows  
**Exact package versions are stored in:** `renv.lock` 

**To recreate the environment:**    
```r
install.packages("renv")  # if needed
renv::restore()
```

---


### How to reproduce the full analysis  
**1. Clone the repository**
```bash 
git clone https://github.com/USERNAME/RProj_ExudatePhos.git
cd RProj_ExudatePhos
```

**2. Open the project and restore packages**  
Open `RProj_ExudatePhos.Rproj` in RStudio, then run:
```r
renv::restore()
```

**3. Run Data Preparation**
```r
rmarkdown::render("scripts/01_DataPrep.Rmd")
```

Creates:
`data_intermediate/AllData.rds`
`data_intermediate/horizon_sub.rds`

**4. Generate Figures**
Main figures:
```r
rmarkdown::render("scripts/03_Figure1.Rmd")
rmarkdown::render("scripts/04_Figure2.Rmd")
rmarkdown::render("scripts/05_Figure3.Rmd")
rmarkdown::render("scripts/06_Figure4.Rmd")
rmarkdown::render("scripts/07_Figure5.Rmd")
```

**Supplementary figures:**
```r
rmarkdown::render("scripts/02_Profile_Figures.Rmd")
rmarkdown::render("scripts/08_SuppFigures_1.Rmd")
rmarkdown::render("scripts/09_SuppFigures_2.Rmd")
```

---


### Statistical Analyses 
**Brief summary:** Analyses include mixed-effects linear models linking exudate P extraction efficiency (defined as the efficiency of each exudate to liberate soil phosphorous) to soil properties and climate variables. Horizon-level summaries are derived from `horizon_sub.rds`. Climate variables (mean annual precipitation and temperature for each site) are derived from PRISM 30-year normal. Full model specifications and diagnostics are documented in individual R Markdown scripts corresponding with their respective figure.


---


### Licensing  
**Code:** PENDING  
**Data:** PENDING  

---


### Citation
If you use this repository, please cite:  
```text
INSERT CITATION AND DOI HERE
```

Associated manuscript:  
```text
INSERT CITATION AND DOI HERE
```

---




